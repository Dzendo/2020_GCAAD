type: theory
files:
- name: src/BasicLogging.kt
  visible: true
  text: |-
    // Logging/BasicLogging.kt
    package logging
    import mu.*

    private val log = KLogging().logger

    fun KLogger.report(msg: String) {
      this.trace(msg)
      this.debug(msg)
      this.info(msg)
      this.warn(msg)
      this.error(msg)
    }

    fun main() {
      log.report("Hello, Kotlin Logging!")
    }
  learner_created: false
- name: src/SimpleLoggingStrategy.kt
  visible: true
  text: |-
    // Logging/SimpleLoggingStrategy.kt
    package logging
    import checkinstructions.dataFile

    val logFile = dataFile("simpleLogFile.txt")

    fun debug(msg: String) =
      System.err.println("Debug: $msg")
    // To disable:
    // fun debug(msg: String) { /* do nothing */ }

    fun trace(msg: String) =
      logFile.appendText("Trace: $msg\n")

    fun main() {
      debug("Simple Logging Strategy")
      trace("Line 1")
      trace("Line 2")
    }
    /* Sample output:
    Debug: Simple Logging Strategy
    */
  learner_created: false
- name: src/AtomicLog.kt
  visible: true
  text: |-
    // Logging/AtomicLog.kt
    package atomiclog
    import checkinstructions.dataFile

    val logFile = dataFile("atomicLog.txt")

    object log {
      init {
        // Reset for each run:
        if (logFile.exists())
          logFile.delete()
      }

      private fun log(type: String, msg: String) =
        logFile.appendText("$type: $msg\n")

      fun trace(msg: String) = log("Trace", msg)
      fun debug(msg: String) = log("Debug", msg)
      fun info(msg: String) = log("Info", msg)
      fun warn(msg: String) = log("Warn", msg)
      fun error(msg: String) = log("Error", msg)
      fun report(msg: String) {
        trace(msg)
        debug(msg)
        info(msg)
        warn(msg)
        error(msg)
      }
    }
  learner_created: false
- name: src/UseAtomicLog.kt
  visible: true
  text: |-
    // Logging/UseAtomicLog.kt
    import atomiclog.*
    import atomictest.eq

    fun main() {
      log.report("Hello, Atomic Log!")
      logFile.readText() eq
    """Trace: Hello, Atomic Log!
    Debug: Hello, Atomic Log!
    Info: Hello, Atomic Log!
    Warn: Hello, Atomic Log!
    Error: Hello, Atomic Log!
    """
    }
  learner_created: false
status: Unchecked
record: -1
